<!DOCTYPE html>
<html class="text-success" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>backendServer</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!-- default bootstrap items -->
    <!-- <script src="assets/bootstrap/js/bootstrap.min.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/Navbar-Centered-Brand-Dark.css">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/createLessonsDefaults.css">
    <!-- code mirror stuff -->
    <script src="codeMirror/lib/codemirror.js"></script>
    <script src="codeMirror/javascript.js"></script>
    <script src="codeMirror/closebrackets.js"></script>
    <script src="codeMirror/matchbrackets.js"></script>
    <link rel="stylesheet" href="codeMirror/lib/codemirror.css">
    <link rel="stylesheet" href="css/myCodeEditorTheme.css">
</head>
<style>
.CodeMirror {
border-radius: 10px;
border-top-left-radius: 0px;
}
.activeTab {
    background-color: rgb(170, 167, 181);
}
</style>
<body>
    <nav id ="navBar" class="navbar navbar-dark navbar-expand-md" style="background: rgb(61, 61, 61);color: rgb(224,224,224);padding: 15px;">
        <div class="container-fluid"><a class="navbar-brand" href="#" style="color: rgba(255,255,255,0.9);font-size: 30px;">JS Lessons</a>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link active" href="#" style="color: rgb(97,161,255);">Create a Lesson</a></li>
                    <li class="nav-item"></li>
                    <li class="nav-item"></li>
                </ul>
            </div><input class="form-control-sm" type="search" style="margin-left: 0px; margin-top: 1px; border-radius: 10px; border-style: none;" placeholder="Search ie : 305502808432711">
            <button class="btn btn-primary btn-sm" type="button" style="margin-left: 10px;border-radius: 10px;height: 31px;">Search</button>
            <button data-bs-target="#navcol-1" data-bs-toggle="collapse" class="navbar-toggler"><span class="visually-hidden">Toggle navigation</span><span class="navbar-dark navbar-toggler-icon"></span></button>
        </div>
    </nav>

    <div class="d-lg-flex flex-row flex-grow-1 flex-shrink-1 justify-content-lg-start" style="padding: 20px;border-style: none;">
        <div class="container d-lg-flex" style="padding-top: 7px;">
            <div class="row flex-fill">
                <div class="col-md-6">
                    <form class="flex-fill">
                        <input class="form-control form-control-sm" type="text" style="border-style: none;border-radius: 8px;" placeholder="Lesson Title">
                        <input class="form-control form-control-sm" type="text" style="border-style: none;border-radius: 8px;" placeholder="Your Question Here">
                        <textarea class="form-control form-control-sm" style="border-radius: 8px;border-style: none;height: 200px;transform: skew(0deg);" spellcheck="true" placeholder="question body here"></textarea>
                        <textarea class="form-control form-control-sm" style="border-radius: 8px;border-style: none;height: 120px;transform: skew(0deg);" spellcheck="true" placeholder="Examples"></textarea></form>
                </div>
                <div class="col-md-6" style="border-width: 0px;">
                    <div class="row">
                        <div class="col">
                            <div class="row">
                                <div class="col">
                                    <div class="row">
                                        <div class="col">
                                            <div id="functionTestTabsContainer">
                                                <span id="tabsContainer">
                                                <!-- <div id="ftest1" class="functionTestTab left">convertFtoC</div> -->
                                                <!-- <div id="ftest2" class="functionTestTab">convertFtoC</div>
                                                <div id="ftest3" class="functionTestTab">convertFtoC</div>
                                                <div id="ftest4" class="functionTestTab">convertFtoC</div> -->
                                                </span>
                                                <input id="functNameInput" class="form-control form-control-sm right left" type="text" style="border-style: none;" placeholder="function name">
                                                <div id="addFntest" onclick="createNewFNTest(function(){
                                                    return document.getElementById(`functNameInput`).value;
                                                }())">&nbsp+</div>
                                            </div>
                                            <div id="functionListPanel">
                                                <div id="codeEditor" class="form-control form-control-sm" style="position: relative; padding:0px; border-radius: 8px;border-style: none; height: 393px;" spellcheck="true"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="row">
                                <div class="col-md-6">
                                    <div class="list-group" id="list-tab" role="tablist">
                                        <a class="list-group-item list-group-item-action " id="list-home-list" data-toggle="list" href="#list-home" role="tab" aria-controls="home">Home</a>
                                        <a class="list-group-item list-group-item-action" id="list-profile-list" data-toggle="list" href="#list-profile" role="tab" aria-controls="profile">Profile</a>
                                        <a class="list-group-item list-group-item-action" id="list-messages-list" data-toggle="list" href="#list-messages" role="tab" aria-controls="messages">Messages</a>
                                        <a class="list-group-item list-group-item-action" id="list-settings-list" data-toggle="list" href="#list-settings" role="tab" aria-controls="settings">Settings</a>
                                      </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="tab-content" id="nav-tabContent">
                                        <div class="tab-pane fade show active" id="list-home" role="tabpanel" aria-labelledby="list-home-list">a</div>
                                        <div class="tab-pane fade" id="list-profile" role="tabpanel" aria-labelledby="list-profile-list">b</div>
                                        <div class="tab-pane fade" id="list-messages" role="tabpanel" aria-labelledby="list-messages-list">c</div>
                                        <div class="tab-pane fade" id="list-settings" role="tabpanel" aria-labelledby="list-settings-list">c</div>
                                      </div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="row">
                        <!-- <div id="functionTestTabsContainer">
                            <span id="tabsContainer">
                            <div id="ftest1" class="functionTestTab left">convertFtoC</div>
                            <div id="ftest2" class="functionTestTab">convertFtoC</div>
                            <div id="ftest3" class="functionTestTab">convertFtoC</div>
                            <div id="ftest4" class="functionTestTab">convertFtoC</div>
                            </span>
                            <input id="functNameInput" class="form-control form-control-sm right" type="text" style="border-style: none;" placeholder="function name">
                            <div id="addFntest" onclick="createNewFNTest(function(){
                                return document.getElementById(`functNameInput`).value;
                            }())">&nbsp+</div>
                        </div>
                        <div id="functionListPanel">
                            <div id="codeEditor" class="form-control form-control-sm" style="padding:0px; border-radius: 8px;border-style: none;height: 300px;" spellcheck="true"></div>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <h3 style="opacity: 0.40;">Preview</h3>
            <div style="box-shadow: 0px 0px 16px 0px rgba(33,37,41,0.14);padding-right: 10px;padding-left: 10px;border-radius: 10px;">
                <h1>Heading</h1>
            </div>
        </div>
    </div> 

</body>
<!-- react scripts -->
<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

<script type = "text/babel" src="assets/js/questionTemplates.jsx"></script>
<script>
var editor = null;
var functionMaps = new Map();
var activeFunctiontestTab = "fntest-0";
window.onload = function() {
    editor = CodeMirror(document.querySelector('#codeEditor'), {
    lineNumbers: true,
    firstLineNumber: 0,
    tabSize: 2,
    value: '//your function here',
    theme: "myCodeEditorTheme",
    continueComments: "Enter",
    mode: 'javascript',
    lineWrapping: true,
    matchBrackets: true,
    autoCloseBrackets: true,
    extraKeys: {"Ctrl-Q": "toggleComment"},
    });
    document.getElementById("codeEditor").addEventListener("keyup", function(e){
        functionMaps.set(activeFunctiontestTab, editor.getValue());
    });
}
// $('#list-tab a').on('click', function (e) {
//     e.preventDefault()
// $(this).tab('show')
// console.log(this);
// });
// console.log("jquery select", $('#myList a'));
function createNewFNTest(name){
    console.log(name);
    var element = createNewFNtab(name);
}
function setActiveFunctionsTab(activeTab){
    var elements = document.getElementsByClassName("functionTestTab");
    for(element of elements){
        element.classList.remove("activeTab");
    }
    document.getElementById(activeTab).classList.add("activeTab");
}
</script>
<script>
class Test {
    title;
    testQuestionSet;
    currentQuestion;
    constructor(title) {
        this.testQuestionSet = new Array();
        this.currentQuestion = 0;
        this.title = title;
    }
    //add question setters and getters
    addQuestion(newQuestion) {
        this.testQuestionSet.push(newQuestion);
    }
    nextQuestion() {
        if (this.currentQuestion >= this.testQuestionSet.length - 1) {
            return;
        }
        this.currentQuestion++;
    }
    returnCurrentQuestion() {
        return this.testQuestionSet[this.currentQuestion];
    }
    returnQuestionSet() {
        return this.testQuestionSet;
    }
}
class Question {
    title;
    text; //Question - a string
    example;
    logs;//array of console.logs to be detected 
    vars; //variables to be detected
    functs; //functions to be made, along with tests.
    //we got three types of questions so far, asking for console.logs; asking to create variables with specific values, function name and expected inputs/outputs
    constructor(title) {
        this.text = "";
        this.logs = [];
        this.vars = [];
        this.functs = [];
        this.title = title;
        this.example = "";
    }
    returnText() {
        return this.text;
    }
    returnConsoleTests() {
        return this.logs;
    }
    returnVariableTests() {
        return this.vars;
    }
    returnFunctionTests() {
        return this.functs;
    }
    addConsoleRequirements(testCase) { //could be a number or string. 
        this.logs.push(testCase);
    }
    addVariableRequirements(newVariableTest) {
        this.vars.push({ name: newVariableTest.name, val: newVariableTest.val, scopeName:  newVariableTest.scopeName});
    }
    addFunctionRequirements(newFunctionTest) { //string, array[{input = "", output = ""}, ..]
        this.functs.push({ name: newFunctionTest.name, tests: newFunctionTest.test, functionDefinition:newFunctionTest.functionDefinition });
    }
    setExample(newExample){
        this.example = newExample;
    }
    setBody(text){
        this.text = text;
    }

}
class variableTest {
    type; //eg var, let, or... am i missing anything? *currently not used.
    name; //name
    val; //value. strings allowed
    scopeName;
    constructor(name, value, scopeName) {
        this.name = name;
        this.val = value;
        this.scopeName = scopeName;
    }
}
class functionTest {
    name; //function name without the parenthesis
    tests; //
    functionDefinition;
    constructor(name) {
        this.name = name;
        this.tests = new Array();
        this.functionDefinition = "";
    }
    addTest(testInput, expectedOutput) { //testInput = "<string>" ie: "3", 
        this.tests.push({ input: testInput, output: expectedOutput });
    }
    setDefinition(string){
        this.functionDefinition = string;
    }
}


</script>
<script>

function populateATesterTest() {
    var newTest = new Test("Welcome to Programming");

    var newQuestion = new Question(``);
    newQuestion.setExample(`x = 6 in scope of abc `);
    var newVariableTest = new variableTest("x", 6, "abc");
    newQuestion.addVariableRequirements(newVariableTest);
    newTest.addQuestion(newQuestion);
    return newTest;
}

var newTest = populateATesterTest();
console.log(newTest);
var newPost = {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(newTest)
}
fetch('http://137.184.237.82:3000/postLab', newPost).then((response) => response.json()).then((data) => {
    console.log(data.URL);
});
</script>
</html>